<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Methods for variable-length time series &#8212; tslearn 0.5.0.5 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-rendered-html.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/custom.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Integration with other Python packages" href="integration_other_software.html" />
    <link rel="prev" title="Getting started" href="gettingstarted.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          tslearn</a>
        <span class="navbar-text navbar-version pull-left"><b>0.5.0.5</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="quickstart.html">Quick Start</a></li>
                <li><a href="user_guide/userguide.html">User Guide</a></li>
                <li><a href="reference.html">API</a></li>
                <li><a href="auto_examples/index.html">Examples</a></li>
                <li><a href="citing.html">Citing tslearn</a></li>
                <li><a href="https://github.com/tslearn-team/tslearn/">Code on GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site map <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="methods-for-variable-length-time-series">
<h1>Methods for variable-length time series<a class="headerlink" href="#methods-for-variable-length-time-series" title="Permalink to this headline">¶</a></h1>
<p>This page lists machine learning methods in <cite>tslearn</cite> that are able to deal
with datasets containing time series of different lengths.
We also provide example usage for these methods using the following
variable-length time series dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.utils</span> <span class="kn">import</span> <span class="n">to_time_series_dataset</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">to_time_series_dataset</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="classification">
<h2>Classification<a class="headerlink" href="#classification" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gen_modules/neighbors/tslearn.neighbors.KNeighborsTimeSeriesClassifier.html#tslearn.neighbors.KNeighborsTimeSeriesClassifier" title="tslearn.neighbors.KNeighborsTimeSeriesClassifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.neighbors.KNeighborsTimeSeriesClassifier</span></code></a></p></li>
<li><p><a class="reference internal" href="gen_modules/svm/tslearn.svm.TimeSeriesSVC.html#tslearn.svm.TimeSeriesSVC" title="tslearn.svm.TimeSeriesSVC"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.svm.TimeSeriesSVC</span></code></a></p></li>
<li><p><a class="reference internal" href="gen_modules/shapelets/tslearn.shapelets.LearningShapelets.html#tslearn.shapelets.LearningShapelets" title="tslearn.shapelets.LearningShapelets"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.shapelets.LearningShapelets</span></code></a></p></li>
</ul>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsTimeSeriesClassifier</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsTimeSeriesClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.svm</span> <span class="kn">import</span> <span class="n">TimeSeriesSVC</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">TimeSeriesSVC</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s2">&quot;gak&quot;</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.shapelets</span> <span class="kn">import</span> <span class="n">LearningShapelets</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">LearningShapelets</span><span class="p">(</span><span class="n">n_shapelets_per_size</span><span class="o">=</span><span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="regression">
<h2>Regression<a class="headerlink" href="#regression" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gen_modules/svm/tslearn.svm.TimeSeriesSVR.html#tslearn.svm.TimeSeriesSVR" title="tslearn.svm.TimeSeriesSVR"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.svm.TimeSeriesSVR</span></code></a></p></li>
</ul>
<div class="section" id="id1">
<h3>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.svm</span> <span class="kn">import</span> <span class="n">TimeSeriesSVR</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">TimeSeriesSVR</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s2">&quot;gak&quot;</span><span class="p">)</span>
<span class="n">y_reg</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">5.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">12.2</span><span class="p">]</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y_reg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="nearest-neighbor-search">
<h2>Nearest-neighbor search<a class="headerlink" href="#nearest-neighbor-search" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gen_modules/neighbors/tslearn.neighbors.KNeighborsTimeSeries.html#tslearn.neighbors.KNeighborsTimeSeries" title="tslearn.neighbors.KNeighborsTimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.neighbors.KNeighborsTimeSeries</span></code></a></p></li>
</ul>
<div class="section" id="id2">
<h3>Examples<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsTimeSeries</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsTimeSeries</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">knn</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">()</span>    <span class="c1"># Search for neighbors using series from `X` as queries</span>
<span class="n">knn</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">X2</span><span class="p">)</span>  <span class="c1"># Search for neighbors using series from `X2` as queries</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="clustering">
<h2>Clustering<a class="headerlink" href="#clustering" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gen_modules/clustering/tslearn.clustering.KernelKMeans.html#tslearn.clustering.KernelKMeans" title="tslearn.clustering.KernelKMeans"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.clustering.KernelKMeans</span></code></a></p></li>
<li><p><a class="reference internal" href="gen_modules/clustering/tslearn.clustering.TimeSeriesKMeans.html#tslearn.clustering.TimeSeriesKMeans" title="tslearn.clustering.TimeSeriesKMeans"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.clustering.TimeSeriesKMeans</span></code></a></p></li>
<li><p><a class="reference internal" href="gen_modules/clustering/tslearn.clustering.silhouette_score.html#tslearn.clustering.silhouette_score" title="tslearn.clustering.silhouette_score"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.clustering.silhouette_score</span></code></a></p></li>
</ul>
<div class="section" id="id3">
<h3>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.clustering</span> <span class="kn">import</span> <span class="n">KernelKMeans</span>
<span class="n">gak_km</span> <span class="o">=</span> <span class="n">KernelKMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s2">&quot;gak&quot;</span><span class="p">)</span>
<span class="n">labels_gak</span> <span class="o">=</span> <span class="n">gak_km</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.clustering</span> <span class="kn">import</span> <span class="n">TimeSeriesKMeans</span>
<span class="n">km</span> <span class="o">=</span> <span class="n">TimeSeriesKMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;dtw&quot;</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">km</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">km_bis</span> <span class="o">=</span> <span class="n">TimeSeriesKMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;softdtw&quot;</span><span class="p">)</span>
<span class="n">labels_bis</span> <span class="o">=</span> <span class="n">km_bis</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.clustering</span> <span class="kn">import</span> <span class="n">TimeSeriesKMeans</span><span class="p">,</span> <span class="n">silhouette_score</span>
<span class="n">km</span> <span class="o">=</span> <span class="n">TimeSeriesKMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;dtw&quot;</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">km</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">silhouette_score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;dtw&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="barycenter-computation">
<span id="variable-length-barycenter"></span><h2>Barycenter computation<a class="headerlink" href="#barycenter-computation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gen_modules/barycenters/tslearn.barycenters.dtw_barycenter_averaging.html#tslearn.barycenters.dtw_barycenter_averaging" title="tslearn.barycenters.dtw_barycenter_averaging"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.barycenters.dtw_barycenter_averaging</span></code></a></p></li>
<li><p><a class="reference internal" href="gen_modules/barycenters/tslearn.barycenters.softdtw_barycenter.html#tslearn.barycenters.softdtw_barycenter" title="tslearn.barycenters.softdtw_barycenter"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.barycenters.softdtw_barycenter</span></code></a></p></li>
</ul>
<div class="section" id="id4">
<h3>Examples<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.barycenters</span> <span class="kn">import</span> <span class="n">dtw_barycenter_averaging</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">dtw_barycenter_averaging</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">barycenter_size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.barycenters</span> <span class="kn">import</span> <span class="n">softdtw_barycenter</span>
<span class="kn">from</span> <span class="nn">tslearn.utils</span> <span class="kn">import</span> <span class="n">ts_zeros</span>
<span class="n">initial_barycenter</span> <span class="o">=</span> <span class="n">ts_zeros</span><span class="p">(</span><span class="n">sz</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">softdtw_barycenter</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="n">initial_barycenter</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="model-selection">
<h2>Model selection<a class="headerlink" href="#model-selection" title="Permalink to this headline">¶</a></h2>
<p>Also, model selection tools offered by <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> can be used on
variable-length data, in a standard way, such as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">KFold</span><span class="p">,</span> <span class="n">GridSearchCV</span>
<span class="kn">from</span> <span class="nn">tslearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsTimeSeriesClassifier</span>

<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsTimeSeriesClassifier</span><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="s2">&quot;dtw&quot;</span><span class="p">)</span>
<span class="n">p_grid</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;n_neighbors&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]}</span>

<span class="n">cv</span> <span class="o">=</span> <span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">knn</span><span class="p">,</span> <span class="n">param_grid</span><span class="o">=</span><span class="n">p_grid</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">cv</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="resampling">
<h2>Resampling<a class="headerlink" href="#resampling" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gen_modules/preprocessing/tslearn.preprocessing.TimeSeriesResampler.html#tslearn.preprocessing.TimeSeriesResampler" title="tslearn.preprocessing.TimeSeriesResampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">tslearn.preprocessing.TimeSeriesResampler</span></code></a></p></li>
</ul>
<p>Finally, if you want to use a method that cannot run on variable-length time
series, one option would be to first resample your data so that all your
time series have the same length and then run your method on this resampled
version of your dataset.</p>
<p>Note however that resampling will introduce temporal distortions in your
data. Use with great care!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tslearn.preprocessing</span> <span class="kn">import</span> <span class="n">TimeSeriesResampler</span>

<span class="n">resampled_X</span> <span class="o">=</span> <span class="n">TimeSeriesResampler</span><span class="p">(</span><span class="n">sz</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Romain Tavenard.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>